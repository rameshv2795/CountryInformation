<!DOCTYPE html>

<html lang="en">

<!-- http://paletton.com/#uid=13z0u0kq6BTfPNvlhG+yVzvzgoO -->


	
	<head>
	
		<title>
		Country Information
		</title>
		<!-- meta tag: info about data not displayed on page, machine parsable -->
		<!-- charset: character set/encoding -->
		<meta charset="utf-8">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<link rel="stylesheet" type="text/css" href="../css/flags.css">
		<link rel="stylesheet" type="text/css" href="../css/flags.min.css">
	</head>
	
	<body>
		<!-- <img src="../css/blank.gif" class="flag flag-cz" alt="Czech Republic" /> -->
		<!--class defines a style, container a bootstrap class -->
		<nav class="navbar navbar-inverse" style="background-color: #0B61AF;">
			<div class="container-fluid">
				<div class="navbar-header">
					<a class="navbar-brand" href="home.html"><font color="white">Countries</font></a>
				</div>
			</div>
		</nav>		
		<div class="container">
			<!--<h1> Country Information </h1> -->
			<!--<h1 id="test_print"></h1> -->
			<table class="table table-striped" id="main_display">
				<thead>
					<tr>
						<th> Country </th>
						<th> Capital </th>
						<th> Population </th>
					</tr>
				</thead>
			</table>
				  
		</div>
		
		<footer class="container-fluid text-center" style="background-color:#0B61AF;">
			<p><font color="white">Footer</font></p>
		</footer>
		
		<script>
			var x;
			var url_all = "https://restcountries.eu/rest/v2/all";
			var request = new XMLHttpRequest();
			/*readyState is https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState*/
			/*onreadystatechange called when readyState changes*/
			request.onreadystatechange = function(){
				if(this.readyState == 4 /*4 is DONE*/ && this.status == 200){
				var data = JSON.parse(this.responseText);
				parse(data);
				}
			}
						
			request.open("GET",url_all,true);
			request.send();
		
			function parse(data){
				var r, table, cell, cell2, cell3;
				table = document.getElementById("main_display");
				var i = 0;
				
				for(i = 0; i < data.length; i++){
					//alert(data[0].name);
					//document.getElementById("test_print").innerHTML = i;
					r = table.insertRow(-1);
					cell = r.insertCell(0);
					cell.innerHTML = "<a id='\"" + data[i].name + "\"'  href='detailed_view.html' >" + data[i].name + "</a>";
					//localStorage.setItem("cname",data[i].name);
					//cell.innerHTML = data[i].name; //data[0].name
					//var link = document.createTextNode("");
					 //var row = "<b>df</b>";
					 //cell.append(row);
					
					
					cell2 = r.insertCell(1);
					cell2.innerHTML = data[i].capital;
					cell3 = r.insertCell(2);
					cell3.innerHTML = data[i].population;					
				}
			//document.write(request.status);
			
				$("a").click(function(){ //get country name on click
					var country = this.id;
					/*
					Regular Expression Syntax: /pattern/modifiers;
					/g is global match
					*/
					country = country.replace(/['"]+/g, '');
					localStorage.setItem("cname",country);
				});
			}
			
			//function on_country_click(c){
			//	alert(c);
			//	localStorage.setItem("cname",c);
			//}
			


		</script>




	</body>












</html>




















